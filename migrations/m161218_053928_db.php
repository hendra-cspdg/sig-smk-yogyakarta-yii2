<?php

use yii\db\Migration;

class m161218_053928_db extends Migration
{
    public function up()
    {
        $this->createTable('daftar_smk', [
                    'npsn' => $this->string(8)->notNull(),
                    'nama_sekolah' => $this->string(45)->notNull(),
                    'no_telpn' => $this->string(6)->notNull(),
                    'akreditasi' => $this->string(1)->notNull(),
                    'created_at' => $this->dateTime(),
                    'updated_at' => $this->dateTime(),
                    'PRIMARY KEY(npsn)',
                ]);

                $this->createTable('daftar_jurusan', [
                    'kode_jurusan' => $this->string(4)->notNull(),
                    'jurusan' => $this->string(45)->notNull(),
                    'created_at' => $this->dateTime(),
                    'updated_at' => $this->dateTime(),
                    'PRIMARY KEY(kode_jurusan)',
                ]);

                $this->createTable('detail_jurusan', [
                    'id' => $this->primaryKey(),
                    'npsn' => $this->string(8)->notNull(),
                    'kode_jurusan' => $this->string(4)->notNull(),
                    'akreditasi' => $this->string(1)->notNull(),
                    'created_at' => $this->dateTime(),
                    'updated_at' => $this->dateTime(),
                ]);

                $this->createIndex(
                    'idx-detail-jurusan-npsn',
                    'detail_jurusan',
                    'npsn'
                );

                $this->createIndex(
                    'idx-detail-jurusan-kode-jurusan',
                    'detail_jurusan',
                    'kode_jurusan'
                );

                $this->addForeignKey(
                    'fk-detail-jurusan-npsn',
                    'detail_jurusan',
                    'npsn',
                    'daftar_smk',
                    'npsn',
                    'CASCADE'
                );

                $this->addForeignKey(
                    'fk-detail-jurusan-kode-jurusan',
                    'detail_jurusan',
                    'kode_jurusan',
                    'daftar_jurusan',
                    'kode_jurusan',
                    'CASCADE'
                );

                $this->createTable('map', [
                    'idmap' => $this->primaryKey(),
                    'latitude' => $this->string(45)->notNull(),
                    'longtitude' => $this->string(45)->notNull(),
                    'alamat' => $this->string(100)->notNull(),
                    'npsn' => $this->string(8)->notNull(),
                    'image' => $this->string(100)->notNull(),
                    'created_at' => $this->dateTime(),
                    'updated_at' => $this->dateTime()
                ]);

                $this->createIndex(
                    'idx-map-npsn',
                    'map',
                    'npsn'
                );

                $this->addForeignKey(
                    'fk-map-npsn',
                    'map',
                    'npsn',
                    'daftar_smk',
                    'npsn',
                    'CASCADE'
                );

                $this->batchInsert('daftar_jurusan', ['kode_jurusan', 'jurusan', 'created_at', 'updated_at'],[
                    ['J001', 'Administrasi Perkantoran', '2016-10-29 20:25:20', '2016-10-29 20:25:20'],
                    ['J002', 'Akuntansi', '2016-11-01 10:32:39', '2016-11-01 10:32:39'],
                    ['J003', 'Tata Niaga [Penjualan]', '2016-11-02 10:50:23', '2016-11-02 10:50:23'],
                    ['J004', 'Multimedia', '2016-11-02 10:56:22', '2016-11-02 10:56:22'],
                    ['J005', 'Teknik Audio Video', '2016-11-02 10:59:59', '2016-11-02 10:59:59'],
                    ['J006', 'Teknik Gambar Bangunan', '2016-11-15 21:32:06', '2016-11-15 21:32:06'],
                    ['J007', 'Teknik Instalasi Tenaga Listrik', '2016-11-15 21:32:35', '2016-11-15 21:32:35'],
                    ['J008', 'Teknik Kendaraan Ringan', '2016-11-15 21:32:58', '2016-11-15 21:32:58'],
                    ['J009', 'Teknik Komputer Dan Jaringan', '2016-11-15 21:33:35', '2016-11-15 21:33:35'],
                    ['J010', 'Teknik Konstruksi Kayu', '2016-11-15 21:34:03', '2016-11-15 21:34:03'],
                    ['J011', 'Teknik Pemesinan', '2016-11-15 21:34:26', '2016-11-15 21:34:26'],
                    ['J012', 'Teknik Survei dan Pemetaan', '2016-11-15 21:35:36', '2016-11-15 21:35:36'],
                    ['J013', 'Teknik Konstruksi Batu dan Beton', '2016-11-15 21:36:04', '2016-11-15 21:36:04'],
                    ['J014', 'Akomodasi Perhotelan', '2016-11-15 21:36:48', '2016-11-15 21:36:48'],
                    ['J015', 'Busana Butik', '2016-11-15 21:37:18', '2016-11-17 08:39:21'],
                    ['J016', 'Jasa Boga', '2016-11-15 21:37:39', '2016-11-15 21:37:39'],
                    ['J017', 'Patiseri', '2016-11-15 21:38:04', '2016-11-15 21:38:04'],
                    ['J018', 'Tata Kecantikan Kulit', '2016-11-15 21:38:31', '2016-11-15 21:38:31'],
                    ['J019', 'Tata Kecantikan Rambut', '2016-11-15 21:40:26', '2016-11-15 21:40:26'],
                    ['J020', 'Usaha Perjalanan Wisata', '2016-11-15 21:41:30', '2016-11-15 21:41:30'],
                    ['J021', 'Animasi', '2016-11-17 08:30:46', '2016-11-17 08:30:46'],
                    ['J022', 'Desain dan Produksi Kria Keramik', '2016-11-17 08:31:48', '2016-11-17 08:31:48'],
                    ['J023', 'Desain dan Produksi Kria Kayu', '2016-11-17 08:32:11', '2016-11-17 08:32:11'],
                    ['J024', 'Desain dan Produksi Kria Logam', '2016-11-17 08:32:32', '2016-11-17 08:32:32'],
                    ['J025', 'Desain dan Produksi Kria Tekstil', '2016-11-17 08:32:55', '2016-11-17 08:32:55'],
                    ['J026', 'Desain dan Produksi Kria Kulit', '2016-11-17 08:33:44', '2016-11-17 08:33:44'],
                    ['J027', 'Desain Komunikasi Visual', '2016-11-17 08:34:17', '2016-11-17 08:34:17'],
                    ]);

                $this->batchInsert('daftar_smk', ['npsn', 'nama_sekolah', 'no_telpn', 'akreditasi', 'created_at', 'updated_at'],[
                    ['20403280', 'SMK NEGERI 2 [ STM 1] Yogyakarta', '513490', 'A', '2016-11-01 11:00:27', '2016-11-02 10:14:11'],
                    ['20403282', 'SMK NEGERI 4 [SMTK] Yogyakarta', '372238', 'A', '2016-11-15 21:44:46', '2016-11-15 21:44:46'],
                    ['20403283', 'SMK NEGERI 5 [SMIK] Yogyakarta', '513463', 'A', '2016-11-17 08:17:16', '2016-11-17 08:17:16'],
                    ['20403295', 'SMK NEGERI 7 [SMEA] Yogyakarta', '512403', 'A', '2016-11-17 08:14:08', '2016-11-17 08:18:03'],
                    ['20404180', 'SMK NEGERI 1 [SMEA 2] Yogyakarta', '512148', 'X', '2016-11-01 10:48:31', '2016-11-17 10:35:56'],
                    ['20404181', 'SMK NEGERI 3 [ STM 2] Yogyakarta', '513490', 'A', '2016-11-01 11:02:17', '2016-11-15 21:31:22'],
                    ['20404182', 'SMK NEGERI 6 [SMKK] Yogyakarta', '512251', 'A', '2016-11-15 21:47:18', '2016-11-17 10:39:38'],
                    ]);

                $this->batchInsert('detail_jurusan', ['id', 'npsn', 'kode_jurusan', 'akreditasi', 'created_at', 'updated_at'],[
                    [1, '20403280', 'J004', 'A', '2016-11-23 00:00:00', '2016-11-02 10:57:20'],
                    [2, '20404180', 'J001', 'X', '2016-11-02 10:15:17', '2016-12-18 12:18:03'],
                    [3, '20404180', 'J002', 'X', '2016-11-02 10:48:40', '2016-12-18 12:18:09'],
                    [4, '20404180', 'J003', 'X', '2016-11-02 10:51:25', '2016-12-18 12:18:15'],
                    [9, '20403280', 'J005', 'A', '2016-11-02 13:14:11', '2016-11-17 09:00:27'],
                    [10, '20404181', 'J005', 'A', '2016-11-14 14:24:09', '2016-11-14 14:24:09'],
                    [11, '20403280', 'J006', 'A', '2016-11-17 08:08:00', '2016-11-17 08:08:00'],
                    [12, '20404182', 'J014', 'A', '2016-11-17 08:38:22', '2016-11-17 08:38:22'],
                    [13, '20404182', 'J015', 'A', '2016-11-17 08:39:57', '2016-11-17 08:39:57'],
                    [14, '20404182', 'J016', 'A', '2016-11-17 08:40:15', '2016-11-17 08:40:15'],
                    [15, '20404182', 'J017', 'A', '2016-11-17 08:40:32', '2016-11-17 08:40:32'],
                    [16, '20404182', 'J018', 'A', '2016-11-17 08:40:52', '2016-11-17 08:40:52'],
                    [17, '20404182', 'J019', 'A', '2016-11-17 08:41:06', '2016-11-17 08:41:06'],
                    [18, '20404182', 'J020', 'A', '2016-11-17 08:41:25', '2016-11-17 08:41:25'],
                    [19, '20404181', 'J006', 'A', '2016-11-17 08:42:16', '2016-11-17 08:42:16'],
                    [20, '20404181', 'J007', 'A', '2016-11-17 08:42:36', '2016-11-17 08:42:36'],
                    [21, '20404181', 'J008', 'A', '2016-11-17 08:42:53', '2016-11-17 08:42:53'],
                    [22, '20404181', 'J009', 'A', '2016-11-17 08:43:17', '2016-11-17 08:43:17'],
                    [23, '20404181', 'J011', 'A', '2016-11-17 08:43:43', '2016-11-17 08:43:43'],
                    [26, '20404181', 'J010', 'A', '2016-11-17 08:45:14', '2016-11-17 08:45:14'],
                    [27, '20404181', 'J004', 'A', '2016-11-17 08:45:57', '2016-11-17 08:45:57'],
                    [28, '20403295', 'J001', 'X', '2016-11-17 08:51:06', '2016-11-17 08:51:06'],
                    [29, '20403295', 'J002', 'X', '2016-11-17 08:51:24', '2016-11-17 08:51:24'],
                    [30, '20403295', 'J004', 'A', '2016-11-17 08:51:38', '2016-11-17 08:51:38'],
                    [31, '20403295', 'J003', 'X', '2016-11-17 08:51:56', '2016-11-17 08:51:56'],
                    [32, '20403295', 'J020', 'X', '2016-11-17 08:53:43', '2016-11-17 08:53:43'],
                    [33, '20403283', 'J021', 'A', '2016-11-17 08:55:03', '2016-11-17 08:55:03'],
                    [34, '20403283', 'J022', 'A', '2016-11-17 08:55:21', '2016-11-17 08:55:21'],
                    [35, '20403283', 'J023', 'A', '2016-11-17 08:55:44', '2016-11-17 08:55:44'],
                    [36, '20403283', 'J024', 'A', '2016-11-17 08:56:10', '2016-11-17 08:56:10'],
                    [37, '20403283', 'J025', 'A', '2016-11-17 08:56:30', '2016-11-17 08:56:30'],
                    [38, '20403283', 'J026', 'A', '2016-11-17 08:56:49', '2016-11-17 08:56:49'],
                    [39, '20403283', 'J027', 'A', '2016-11-17 08:57:15', '2016-11-17 08:57:15'],
                    [40, '20403282', 'J014', 'X', '2016-11-17 08:57:51', '2016-11-17 08:57:51'],
                    [41, '20403282', 'J015', 'A', '2016-11-17 08:58:19', '2016-11-17 08:58:19'],
                    [42, '20403282', 'J016', 'X', '2016-11-17 08:58:40', '2016-11-17 08:58:40'],
                    [43, '20403282', 'J017', 'X', '2016-11-17 08:58:57', '2016-11-17 08:58:57'],
                    [44, '20403282', 'J018', 'A', '2016-11-17 08:59:15', '2016-11-17 08:59:15'],
                    [45, '20403282', 'J019', 'A', '2016-11-17 08:59:26', '2016-11-17 08:59:26'],
                    [46, '20403282', 'J020', 'X', '2016-11-17 08:59:44', '2016-11-17 08:59:44'],
                    [47, '20403280', 'J007', 'A', '2016-11-17 09:00:48', '2016-11-17 09:00:48'],
                    [48, '20403280', 'J008', 'A', '2016-11-17 09:01:07', '2016-11-17 09:01:07'],
                    [49, '20403280', 'J009', 'A', '2016-11-17 09:01:24', '2016-11-17 09:01:24'],
                    [50, '20403280', 'J011', 'A', '2016-11-17 09:01:45', '2016-11-17 09:01:45'],
                    [51, '20403280', 'J012', 'A', '2016-11-17 09:02:02', '2016-11-17 09:02:02'],
                    [52, '20403280', 'J013', 'A', '2016-11-17 09:02:20', '2016-11-17 09:02:20'],
                    ]);

                $this->batchInsert('map', ['idmap', 'latitude', 'longtitude', 'alamat', 'npsn', 'image', 'created_at', 'updated_at'],[
                    [2, '-7.7777356', '110.3649118', 'JL. AM. SANGAJI 47, Cokrodiningratan, Kec. Jetis, Kota Yogyakarta Prop. D.I. Yogyakarta', '20403280', 'uploads/smk 2 yogyakarta.jpg', '2016-11-03 21:27:16', '2016-11-17 09:19:11'],
                    [3, '-7.7930025', '110.3554427', 'Jalan Kemetiran Kidul No.60, 001, Gedong Tengen, Kota Yogyakarta, Daerah Istimewa Yogyakarta 55272', '20404180', 'uploads/Smk n 1.jpg', '2016-11-08 20:23:20', '2016-11-08 20:23:20'],
                    [4, '-7.777709', '110.3637483', 'Jl. R.W. Monginsidi 2 Yogyakarta ', '20404181', 'uploads/nopicture.png', '2016-11-15 21:43:55', '2016-11-15 21:43:55'],
                    [5, '-7.821191', '110.3836643', 'Jl. Sidikan 60 YK \r\n', '20403282', 'uploads/nopicture.png', '2016-11-15 21:45:39', '2016-11-17 09:08:52'],
                    [6, '-7.7977363', '110.3803202', 'Jl. Kenari no. 4 Yk \r\n', '20404182', 'uploads/nopicture.png', '2016-11-15 21:48:11', '2016-11-15 21:48:11'],
                    [7, '-7.800817', '110.3931672', 'Jl. Kenari no. 71 Yk \r\n', '20403283', 'uploads/nopicture.png', '2016-11-17 08:27:06', '2016-11-17 09:20:22'],
                    [8, '-7.7894827', '110.3844901', 'Jl. Gowongan Kidul JT III/ 416 Yk \r\n', '20403295', 'uploads/nopicture.png', '2016-11-17 09:10:16', '2016-11-17 09:10:16'],
                    ]);

    }

    public function down()
    {
        echo "m161218_053928_db cannot be reverted.\n";

        return false;
    }

    /*
    // Use safeUp/safeDown to run migration code within a transaction
    public function safeUp()
    {
    }

    public function safeDown()
    {
    }
    */
}
